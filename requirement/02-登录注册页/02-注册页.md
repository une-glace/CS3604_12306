# 2.2 注册页需求

## 2.2.1 页面布局
- **Header/Footer**: 与首页及登录页一致。
- **注册流程**: 分步向导（Step Wizard），共分为两个主要步骤：
  - **步骤1：账户信息**（填写基本资料、联系方式、设置密码）
  - **步骤2：手机验证**（短信验证码校验）

## 2.2.2 账户信息填写 (Step 1)
- **用户名**: 
  - 规则：6-30位字母、数字、下划线，必须以字母开头。
  - 校验：
    - 失去焦点时实时调用 `checkUsernameAvailability` 检查是否被占用。
    - 格式校验正则：`/^[a-zA-Z][a-zA-Z0-9_]*$/`。
    - 成功时显示绿色对勾图标。
- **登录密码**:
  - 规则：长度>=6，仅允许字母、数字、下划线。
  - 复杂度要求：至少包含字母、数字、下划线中的两种。
  - 功能：
    - 支持显示/隐藏密码切换。
    - **密码强度指示器**：根据复杂度实时显示 弱/中/强 三色进度条。
- **确认密码**: 必须与登录密码完全一致。
- **证件信息**:
  - **证件类型**：下拉选择，支持"中国居民身份证"（默认）、"外国人永久身份证"、"港澳台居民身份证"。
  - **姓名**：支持中文、英文、点、空格。
    - 长度校验：按字符显示长度计算（中文算2字符），限制在3-30字符之间。
  - **证件号码**：
    - 中国居民身份证：限制18位，正则校验 `^\d{17}[0-9Xx]$`。
    - 其他证件：仅校验是否包含特殊字符。
- **联系方式**:
  - **邮箱**：选填，若填写则校验邮箱格式。
  - **手机号码**：
    - 支持国际区号选择（如 +86, +852, +1 等）。
    - 格式校验：+86模式下校验11位数字。
- **旅客类型**: 下拉选择 "成人" 或 "儿童"。
- **协议条款**: 必须勾选"我已阅读并同意遵守《中国铁路客户服务中心网站服务条款》《隐私权政策》"。

## 2.2.3 手机验证 (Step 2)
- **界面展示**: 
  - 提示"验证码已发送至手机号：+86 138xxxx"。
  - 验证码输入框（6位数字）。
- **获取验证码**:
  - 点击"发送验证码"按钮，调用 `sendPhoneCode` 接口。
  - 按钮进入60秒倒计时（"60s后重发"）。
- **验证操作**:
  - 提供单独的"验证"按钮调用 `verifyPhoneCode` 接口（可选操作）。
  - 点击"完成注册"时也会自动进行验证。
- **导航**: 支持点击"上一步"返回修改信息。

## 2.2.4 注册提交与反馈
**Scenario: 注册成功**
- Given 用户完成两步填写并点击"完成注册"
- When 后端返回注册成功
- Then 系统自动执行登录操作（使用返回的Token）
- And 弹出"注册成功！"提示
- And 跳转至个人中心页 (`/profile`)

**Scenario: 注册失败（用户名已存在）**
- When 提交时后端返回用户名已存在的错误
- Then 若用户手机号已通过验证：
  - 尝试使用当前用户名密码自动登录。
  - 若登录成功，提示"账号已存在，已为您登录"并跳转。
  - 若登录失败，显示具体的错误提示信息。

**Scenario: 注册失败（其他原因）**
- When 提交时发生网络错误或校验错误
- Then 在底部显示红色的错误提示信息（如"验证码输入错误"）。
